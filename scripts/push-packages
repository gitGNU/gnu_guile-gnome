#!/bin/bash

root=`cd $(dirname $0)/.. && pwd`
if test -n "$1"; then
    echo "usage: $0"
    echo "pushes out all packages in $root to their origin"
    exit 1
fi

for dir in $root/*; do
    if test -d $dir -a -d $dir/.git; then
        package=`basename $dir`
        echo "pushing $dir to root"
        ( cd $dir; git push )
    fi
done
echo "pushing $root to origin"
( cd $root; git push )
