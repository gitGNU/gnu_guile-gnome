#!/bin/sh

pwd=`pwd`
this_dir=`dirname $0`
this_dir=`readlink -f $this_dir`
src_dir=@top_srcdir@
cd $this_dir
src_dir=`readlink -f $src_dir`
cd $pwd

ALL_PKGS="@AG_PACKAGES@"

for pkg in $ALL_PKGS; do
  if [ -d $src_dir/$pkg ]; then
    if [ $src_dir != $this_dir ]; then
      GUILE_LOAD_PATH=$src_dir/$pkg:$this_dir/$pkg:$GUILE_LOAD_PATH
    else
      GUILE_LOAD_PATH=$this_dir/$pkg:$GUILE_LOAD_PATH
    fi
    LD_LIBRARY_PATH=$this_dir/$pkg/gnome/gw:$LD_LIBRARY_PATH
    PKG_CONFIG_PATH=$this_dir/$pkg:$PKG_CONFIG_PATH
  fi
done

if [ -d $src_dir/glib ]; then
  LD_LIBRARY_PATH=$this_dir/glib/gnome/gobject:$LD_LIBRARY_PATH
fi


export GUILE_LOAD_PATH LD_LIBRARY_PATH PKG_CONFIG_PATH

exec "$@"
